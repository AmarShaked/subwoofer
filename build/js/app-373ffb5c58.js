!function(){"use strict";angular.module("app",["app.core","app.widgets","app.admin","app.home","app.layout","app.subsonic","app.login","app.albums","app.utils"])}(),function(){"use strict";angular.module("app.admin",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.albums",["app.core"])}(),function(){"use strict";angular.module("blocks.logger",[])}(),function(){"use strict";angular.module("blocks.router",["ui.router","blocks.logger"])}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngSanitize","blocks.logger","blocks.router","ui.router","ngplus","ngStorage","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.buffering","angular-loading-bar"])}(),function(){"use strict";angular.module("app.home",["app.core","app.widgets"])}(),function(){"use strict";angular.module("app.layout",["app.core","ui.bootstrap.collapse"])}(),function(){"use strict";angular.module("app.login",["app.core"])}(),function(){"use strict";angular.module("app.subsonic",["app.core"])}(),function(){"use strict";angular.module("app.utils",["app.core"])}(),function(){"use strict";angular.module("app.widgets",[])}(),function(){"use strict";function t(t){function e(){t.info("Activated Admin View")}var i=this;i.title="Admin",e()}angular.module("app.admin").controller("AdminController",t),t.$inject=["logger"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"admin",config:{url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminController",controllerAs:"vm",title:"Admin",settings:{nav:2,content:'<i class="fa fa-lock"></i> Admin'}}}]}angular.module("app.admin").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t,e,i){function a(){n(),l()}function n(){t.getMusicDirectory(e.parent).then(function(t){return r.parentAlbum=t,s(),t})}function s(){angular.forEach(r.parentAlbum.child,function(t){t.id===e.id&&(r.directoryAlbum=t)})}function l(){angular.forEach(e.child,function(t){t.duration=i.durationToTime(t.duration)})}var r=this;r.album=e,r.parentAlbum={},a()}angular.module("app.albums").controller("AlbumDetailController",t),t.$inject=["AlbumApi","album","GeneralTasks"]}(),function(){"use strict";function t(t,e){function i(){}var a=this;a.albums=e,i()}angular.module("app.albums").controller("AlbumsController",t),t.$inject=["AlbumApi","albums"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"albums",config:{url:"/albums",template:"<ui-view/>",title:"Albums","abstract":!0}},{state:"albums.all",config:{url:"/all",templateUrl:"app/albums/albums.html",controller:"AlbumsController",controllerAs:"vm",title:"Albums",resolve:{albums:["AlbumApi",function(t){return t.getAlbumList("alphabeticalByName",500)}]}}},{state:"albums.detail",config:{url:"/{albumId}",templateUrl:"app/albums/album.detail.html",controller:"AlbumDetailController",controllerAs:"vm",title:"Albums",params:{parentId:"parentId"},resolve:{album:["AlbumApi","$stateParams",function(t,e){return t.getMusicDirectory(e.albumId)}]}}}]}angular.module("app.albums").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t,e){function i(i,a,n){e.error(i,n),t.error("Error: "+i,a)}function a(i,a,n){e.info(i,n),t.info("Info: "+i,a)}function n(i,a,n){e.success(i,n),t.info("Success: "+i,a)}function s(i,a,n){e.warning(i,n),t.warn("Warning: "+i,a)}var l={showToasts:!0,error:i,info:a,success:n,warning:s,log:t.log};return l}angular.module("blocks.logger").factory("logger",t),t.$inject=["$log","toastr"]}(),function(){"use strict";function t(t,e,i){function a(t,a,s,l){function r(t,a){t.forEach(function(t){t.config.resolve=angular.extend(t.config.resolve||{},n.resolveAlways),e.state(t.state,t.config)}),a&&!p&&(p=!0,i.otherwise(a))}function o(){a.$on("$stateChangeError",function(e,i,a,n,s,r){if(!m){g.errors++,m=!0;var o=i&&(i.title||i.name||i.loadedTemplateUrl)||"unknown target",c="Error routing to "+o+". "+(r.data||"")+". <br/>"+(r.statusText||"")+": "+(r.status||"");l.warning(c,[i]),t.path("/")}})}function c(){o(),d()}function u(){return s.get()}function d(){a.$on("$stateChangeSuccess",function(t,e,i,s,l){g.changes++,m=!1;var r=n.docTitle+" "+(e.title||"");a.title=r})}var m=!1,p=!1,g={errors:0,changes:0},v={configureStates:r,getStates:u,stateCounts:g};return c(),v}var n={docTitle:void 0,resolveAlways:{}};window.history&&window.history.pushState||(window.location.hash="/"),t.html5Mode(!0),this.configure=function(t){angular.extend(n,t)},this.$get=a,a.$inject=["$location","$rootScope","$state","logger"]}angular.module("blocks.router").provider("routerHelper",t),t.$inject=["$locationProvider","$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t){t.options.timeOut=4e3,t.options.positionClass="toast-bottom-right"}var e=angular.module("app.core");e.config(t),t.$inject=["toastr"];var i={appErrorPrefix:"",appTitle:"subwoofer",apiVersion:"1.13.0"};e.config(["$locationProvider",function(t){t.html5Mode({enabled:!0,requireBase:!1})}]),e.value("config",i),e.config(["$httpProvider",function(t){t.defaults.useXDomain=!0,delete t.defaults.headers.common["X-Requested-With"]}]),e.run(["$rootScope","LoginHelper","$state",function(t,e,i){t.$on("$stateChangeStart",function(t,a,n,s,l){var r="login"===a.name;if(!r){var o=e.isAuthenticated();o||(t.preventDefault(),i.go("login"))}})}])}(),function(){"use strict";angular.module("app.core").constant("toastr",toastr).constant("moment",moment)}(),function(){"use strict";function t(t){var i="/404";t.configureStates(e(),i)}function e(){return[{state:"404",config:{url:"/404",templateUrl:"app/core/404.html",title:"404"}}]}t.$inject=["routerHelper"],angular.module("app.core").run(t)}(),function(){"use strict";function t(t,e,i){function a(){return e.when(72)}function n(){function e(t){return t.data}return t.get("/api/people").then(e)}var s={getPeople:n,getMessageCount:a};return s}angular.module("app.core").factory("dataservice",t),t.$inject=["$http","$q","logger"]}(),function(){"use strict";function t(t,e,i,a){function n(){s()}function s(){t.getNowPlaying().then(function(t){return l.nowPlaying=t,l.nowPlaying})}var l=this;n(),l.recent=e,l.nowPlaying=[],l.newest=i}angular.module("app.home").controller("HomeController",t),t.$inject=["AlbumApi","recent","newest","cfpLoadingBar"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"home",config:{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"vm",title:"Home",resolve:{recent:["AlbumApi",function(t){return t.getAlbumList("recent",12)}],newest:["AlbumApi",function(t){return t.getAlbumList("newest",5)}]},settings:{nav:1,content:'<i class="fa fa-home"></i> Home'}}}]}angular.module("app.home").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(){function t(t,e,i){function a(e){var i="dropy";e.preventDefault(),s.hasClass(i)?s.hasClass(i)&&(s.removeClass(i),n.slideUp(350,t.whenDoneAnimating)):(n.slideDown(350,t.whenDoneAnimating),s.addClass(i))}var n=e.find(".sidebar-inner"),s=e.find(".sidebar-dropdown a");e.addClass("sidebar"),s.click(a)}var e={link:t,restrict:"EA",scope:{whenDoneAnimating:"&?"}};return e}angular.module("app.layout").directive("htSidebar",t)}(),function(){"use strict";function t(){function t(t){t.isCollapsed=!0}var e={bindToController:!0,controller:t,controllerAs:"vm",restrict:"EA",scope:{navline:"="},templateUrl:"app/layout/ht-top-nav.html"};return t.$inject=["$scope"],e}angular.module("app.layout").directive("htTopNav",t)}(),function(){"use strict";function t(t,e,i,a,n){function s(){}var l=this;l.navline={title:i.appTitle,text:"username"},s(),l.sources=[]}angular.module("app.layout").controller("ShellController",t),t.$inject=["$rootScope","$timeout","config","logger","$sce"]}(),function(){"use strict";function t(t,e){function i(){}function a(e){return t.current.title?t.current.title.substr(0,e.length)===e?"current":"":void 0}var n=this;e.getStates();n.isCurrent=a,i()}angular.module("app.layout").controller("SidebarController",t),t.$inject=["$state","routerHelper"]}(),function(){"use strict";function t(t){function e(){t.destroySession()}function i(){t.login(a.username,a.password,a.subsonicSite)}var a=this;e(),a.username="guest",a.password="guest",a.subsonicSite="http://demo.subsonic.org",a.login=i}angular.module("app.home").controller("LoginController",t),t.$inject=["LoginHelper"]}(),function(){"use strict";function t(t,e,i,a,n,s,l){function r(t,n,r){return i.site=r,i.subsonicParams={u:t,p:"enc:"+o(n),c:e.appTitle,v:e.apiVersion,f:"json"},a.ping().then(function(t){l.subsonicParams=i.subsonicParams,l.subsonicSite=i.site,s.go("home")})}function o(t){var e,i,a="";for(i=0;i<t.length;i++)e=t.charCodeAt(i).toString(16),a+=e.slice(-4);return a}function c(){return l.subsonicParams?(i.isConnected=!0,i.subsonicParams=l.subsonicParams,!0):!1}function u(){delete l.subsonicParams,delete i.isConnected,delete i.subsonicParams}var d={login:r,isAuthenticated:c,destroySession:u};return d}angular.module("app.login").service("LoginHelper",t),t.$inject=["ssHttp","config","$rootScope","SystemApi","logger","$state","$localStorage"]}(),function(){"use strict";function t(t){t.configureStates(e())}function e(){return[{state:"login",config:{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController",controllerAs:"vm",title:"Login"}}]}angular.module("app.login").run(t),t.$inject=["routerHelper"]}(),function(){"use strict";function t(t){function e(e,i){return t({method:"GET",url:"/getAlbumList.view",params:{type:e,size:i}}).then(function(t){return t.albumList.album})}function i(e,i){return t({method:"GET",url:"/getAlbumList2.view",params:{type:e,size:i}}).then(function(t){return t.albumList2.album})}function a(e){return t({method:"GET",url:"/getAlbum.view",params:{id:e}}).then(function(t){return t.album})}function n(e){return t({method:"GET",url:"/getMusicDirectory.view",params:{id:e}}).then(function(t){return t.directory})}function s(){return t({method:"GET",url:"/getNowPlaying.view"}).then(function(t){return t.nowPlaying.entry})}var l={getAlbumList:e,getNowPlaying:s,getMusicDirectory:n,getAlbumList2:i,getAlbum:a};return l}angular.module("app.subsonic").service("AlbumApi",t),t.$inject=["ssHttp"]}(),function(){"use strict";function t(t,e,i,a,n,s){return function(e){function l(t){if(t&&"ok"===t.data["subsonic-response"].status)return t.data["subsonic-response"];if(t&&"failed"===t.data["subsonic-response"].status)throw t.data["subsonic-response"].error.message}function r(t){var e="string"==typeof t?t:"Failed to communicate with the server..";return a.error(e),n.reject(e)}i.site=i.site?i.site:s.subsonicSite,i.subsonicParams=i.subsonicParams?i.subsonicParams:s.subsonicParams;var o=i.site+"/rest"+e.url,c={url:o,params:i.subsonicParams},u=angular.merge(e,c);return t(u).then(l)["catch"](r)}}angular.module("app.subsonic").factory("ssHttp",t),t.$inject=["$http","config","$rootScope","logger","$q","$localStorage"]}(),function(){"use strict";function t(t,e,i,a){function n(){function e(t){return t.status}return t({method:"GET",url:"/ping.view"}).then(e)}var s={ping:n};return s}angular.module("app.subsonic").service("SystemApi",t),t.$inject=["ssHttp","$rootScope","config","logger"]}(),function(){"use strict";function t(){function t(t){var e=new Date(1e3*t),i=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds(),a=e.getMinutes();return a+":"+i}var e={durationToTime:t};return e}angular.module("app.utils").service("GeneralTasks",t),t.$inject=[]}(),function(){"use strict";function t(t,e){var i={scope:{artist:"@",title:"@",id:"@",size:"@",albumid:"@",parentid:"@"},restrict:"EA",templateUrl:"app/widgets/album.html"};return i}angular.module("app.widgets").directive("album",t),t.$inject=["config","$rootScope"]}(),function(){"use strict";function t(t){function e(t,e,n){n.$observe("htImgPerson",function(t){t=i+(t||a),n.$set("src",t)})}var i=t.imageBasePath,a=t.unknownPersonImageSource,n={link:e,restrict:"A"};return n}angular.module("app.widgets").directive("htImgPerson",t),t.$inject=["config"]}(),function(){"use strict";function t(){function t(t,e,i){t.toggleContent=function(){if("true"===t.allowCollapse){var i=angular.element(e).siblings(".widget-content");i.toggle()}}}var e={scope:{title:"@",subtitle:"@",rightText:"@",allowCollapse:"@"},templateUrl:"app/widgets/widget-header.html",restrict:"EA",link:t};return e}angular.module("app.widgets").directive("htWidgetHeader",t)}(),function(){"use strict";function t(t,e){var i=e.subsonicParams,a={scope:{size:"@",id:"@"},restrict:"A",link:function(t,a,n){var s=e.site+"/rest/getCoverArt.view?id="+t.id+"&u="+i.u+"&p="+i.p+"&c="+i.c+"&v="+i.v+"&size="+t.size;a.on("load",function(){a.attr("src",s)})}};return a}angular.module("app.widgets").directive("ssimg",t),t.$inject=["config","$rootScope"]}(),angular.module("app.core").run(["$templateCache",function(t){t.put("app/admin/admin.html",'<section class=mainbar><section class=matter><div class=container><div class=row><div class="widget wviolet"><div ht-widget-header title={{vm.title}}></div><div class="widget-content user"><h3>TODO: Implement Your Features</h3></div><div class=widget-foot><div class=clearfix></div></div></div></div></div></section></section>'),t.put("app/albums/album.detail.html",'<section class=mainbar><section class=matter><div class=container><div class="row page-header"><img ssimg src=/images/base-cover-art.png id={{vm.album.id}} style="height: 150px" class="pull-left m-r" size=150><h3 class=text-orange>{{vm.directoryAlbum.title}}</h3><h5>{{vm.directoryAlbum.artist}}</h5><span class="label label-orange">{{vm.album.child.length}} songs</span> <span class="label label-orange">played {{vm.directoryAlbum.playCount}} times</span></div><div class=table-responsive><table class=table><thead><th>#</th><th>track</th><th>title</th><th>album</th><th>artist</th><th>duration</th></thead><tbody><tr ng-repeat="song in vm.album.child"><td><div class=btn-toolbar><div class="btn-group btn-group-xs"><a><span class=p-rl-xs><i class="fa fa-play"></i></span></a> <a><span class=p-rl-xs><i class="fa fa-plus"></i></span></a> <a><span class=p-rl-xs><i class="fa fa-star-o"></i></span></a></div></div></td><td>{{song.track}}</td><td>{{song.title}}</td><td>{{song.album}}</td><td>{{song.artist}}</td><td>{{song.duration}}</td></tr></tbody></table></div></div></section></section>'),t.put("app/albums/albums.html",'<section class=mainbar><section class=matter><div class=container><div class=row><div class=col-md-12><div class=page-header><h3 class=text-orange>Albums</h3><p>{{vm.albums.length}} albums</p></div></div></div><div class=row><div class="col-xs-6 col-sm-4 col-md-2 col-lg-2" ng-repeat="album in vm.albums"><album id="{{album.coverArt || album.id}}" , parentid={{album.parent}} size=300 artist={{album.artist}} title={{album.title}} albumid={{album.id}}></album></div></div></div></section></section>'),t.put("app/home/home.html",'<section id=dashboard-view class=mainbar><section class=matter><div class=container><div class=row><div class=col-md-12><div class=page-header><h3 class=text-orange>Recently played</h3></div></div></div><div class=row><div class="col-xs-6 col-sm-4 col-md-2 col-lg-2" ng-repeat="album in vm.recent"><album id="{{album.coverArt || album.id}}" parentid={{album.parent}} albumid={{album.id}} size=300 artist={{album.artist}} title={{album.title}}></album></div></div><div class=row><div class=col-md-6><div class=page-header><h3 class=text-orange>Recently added</h3></div></div><div class=col-md-6><div class=page-header><h3 class=text-orange>Now playing</h3></div></div></div><div class=row><div class=col-md-6><ul class=media-list><li class=media ng-repeat="album in vm.newest"><div class=media-left><a href=#><img ssimg src=/images/base-cover-art.png id="{{album.coverArt || album.id}}" size=70 style="height: 70px;"></a></div><div class=media-body><a ui-sref="albums.detail({albumId: album.id, parentId: parentid})"><h6 class="media-heading text-orange">{{album.title}}</h6></a> {{album.artist}}</div></li></ul></div><div class=col-md-6><ul class=media-list><li class=media ng-repeat="np in vm.nowPlaying"><div class=media-left><a href=#><img ssimg src=/images/base-cover-art.png style="height: 70px;" id={{np.coverArt}} size=70></a></div><div class=media-body><h6 class="media-heading text-orange text-ellipsis">{{np.title}}</h6>{{np.username}} - {{np.minutesAgo}} minutes ago</div></li></ul></div></div></div></section></section>'),t.put("app/core/404.html",'<section id=dashboard-view class=mainbar><section class=matter><div class=container><div class=row><div class=col-md-12><ul class=today-datas><li class=bred><div class=pull-left><i class="fa fa-warning"></i></div><div class="datas-text pull-right"><a><span class=bold>404</span></a>Page Not Found</div><div class=clearfix></div></li></ul></div></div><div class=row><div class="widget wblue"><div ht-widget-header title="Page Not Found" allow-collapse=true></div><div class="widget-content text-center text-info"><div class=container>No soup for you!</div></div><div class=widget-foot><div class=clearfix></div></div></div></div></div></section></section>'),t.put("app/layout/footer.html",'<div class=app-footer><videogular class="videogular-container audio"><vg-media vg-src=vm.sources vg-type=audio></vg-media><vg-controls><vg-button><i class="fa fa-backward"></i></vg-button><vg-play-pause-button></vg-play-pause-button><vg-button><i class="fa fa-forward"></i></vg-button><vg-scrub-bar><vg-title class=hidden-xs>אורות גבוהים</vg-title><vg-scrub-bar-current-time></vg-scrub-bar-current-time></vg-scrub-bar><vg-time-display>{{ currentTime | date:\'mm:ss\':\'+0000\' }}</vg-time-display><vg-volume><vg-mute-button></vg-mute-button></vg-volume></vg-controls></videogular></div>'),t.put("app/layout/ht-top-nav.html",'<nav class="navbar navbar-fixed-top"><div class=navbar-header><a href="/" class=navbar-brand><img src=images/logo.png> <span class=brand-title>{{vm.navline.title}}</span></a> <a class="btn navbar-btn navbar-toggle" ng-click="isCollapsed = !isCollapsed"><span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></a></div><div class="navbar-collapse collapse" uib-collapse=isCollapsed><div class="pull-right navbar-logo"><ul class="nav navbar-nav pull-right"><li><span>{{vm.navline.text}}</span></li></ul></div></div></nav>'),t.put("app/layout/left-sidebar.html",'<div class=left-sidebar><div class=left-sidebar-filler></div><div class=sidebar-inner><div class="player padder"><img src="http://samar.subsonic.org/rest/getCoverArt.view?id=1354&amp;u=shakedamar&amp;p=enc:5368616b656433363336&amp;c=subwoofer&amp;v=1.13.0&amp;size=300" class=img-full></div></div></div>'),t.put("app/layout/shell.html",'<div ng-controller="ShellController as vm"><header ng-if=isConnected class=clearfix><ht-top-nav navline=vm.navline></ht-top-nav></header><section id=content class=content><div ng-if=isConnected ng-include="\'app/layout/sidebar.html\'"></div><div ng-if=isConnected ng-include="\'app/layout/left-sidebar.html\'"></div><div ui-view class=shuffle-animation></div></section><footer ng-if=isConnected ng-include="\'app/layout/footer.html\'"></footer></div>'),t.put("app/layout/sidebar.html",'<div ng-controller="SidebarController as vm"><ht-sidebar when-done-animating=vm.sidebarReady()><div class=sidebar-filler></div><div class=sidebar-dropdown><a href=#>Menu</a></div><div class=sidebar-inner><div class="sidebar-widget darker">Your library</div><ul class=navi><li class="darker fade-selection-animation" ng-class="vm.isCurrent(\'Home\')"><a ui-sref=home><i class="fa fa-home"></i> Home</a></li><li class="darker fade-selection-animation"><a><i class="fa fa-microphone"></i> Artists</a></li><li class="darker fade-selection-animation" ng-class="vm.isCurrent(\'Albums\')"><a ui-sref=albums.all><i class="fa fa-toggle-right"></i> Albums</a></li><li class="darker fade-selection-animation"><a><i class="fa fa-music"></i> Songs</a></li><li class="darker fade-selection-animation"><a><i class="fa fa-list"></i> Playlists</a></li></ul></div></ht-sidebar></div>'),t.put("app/login/login.html",'<section class><section class=matter><div class=container><div class="login-wrapper text-center"><img src=images/logo.png><form ng-submit=vm.login() name=form-horizontal><div class=form-group><div class=input-group><input type=url required ng-model=vm.subsonicSite class=form-control placeholder=http://demo.subsonic.org></div><div class=input-group><input type=text required ng-model=vm.username class=form-control placeholder=Username></div><div class=input-group><input type=password required ng-model=vm.password class=form-control placeholder=Password></div><div class=form-group><div class="col-sm-12 m-t"><button type=submit class="btn btn-default">Login</button></div></div></div></form></div></div></section></section>'),t.put("app/widgets/album.html",'<div class=item><div class=pos-rlt><div class="item-overlay bg-black-opacity r r-2x"><div class="center text-center m-t-n w-full"><a><i class="fa fa-2x fa-play text-white"></i></a></div></div><a ui-sref=music.detail href=#/music/detail><img ssimg src=/images/base-cover-art.png id={{id}} , size={{size}} class=img-full></a></div><div class=padder><a ui-sref="albums.detail({albumId: albumid, parentId: parentid})" class=text-ellipsis href=#/music/detail>{{title}}</a> <a ui-sref=music.detail class="text-ellipsis text-xs text-muted" href=#/music/detail>{{artist}}</a></div></div>'),t.put("app/widgets/widget-header.html",'<div class=widget-head ng-class="{\'collapsive\': allowCollapse === \'true\'}" ng-click=toggleContent()><div class="page-title pull-left">{{title}}</div><small class=page-title-subtle ng-show=subtitle>({{subtitle}})</small><div class="widget-icons pull-right"></div><small class="pull-right page-title-subtle" ng-show=rightText>{{rightText}}</small><div class=clearfix></div></div>')}]);